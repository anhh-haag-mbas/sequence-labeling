
\section{Experiments}

\input{src/experiments/POS}
\input{src/experiments/NER}

\subsection{OOV results}

We now consider the out-of-vocabulary (OOV) accuracy of the models. Here, we
focus our attention on the results of the DyNet and the PyTorch implementations,
as the TensorFlow results unfortunately were corrupted. The overall results for
both the POS and the NER task can be found in
Table~\ref{table:oov-accuracy-total}.

\begin{table}[h!]
    \centering
    \begin{tabular}{c l c c|c c}
     \toprule
       \multirow{2}{*}{\bfseries Task}
     & \multirow{2}{*}{\bfseries Batch size}
     & \multicolumn{2}{c}{\bfseries DyNet}
     & \multicolumn{2}{c}{\bfseries PyTorch} \\

      \cmidrule(lr){3-6}
     && Bi-LSTM  & Bi-LSTM-CRF & Bi-LSTM  & Bi-LSTM-CRF \\ 

      \cmidrule(lr){1-6}
      \multirow{4}{*}{\textbf{POS}}
      &  1 & 64.1\% & 63.9\%  & 58.4\% & 60.9\%  \\
      &  8 & 62.2\% & 62.4\%  & 51.2\% & 59.3\%  \\
      & 32 & 57.5\% & 58.4\%  & 44.0\% & 54.7\%  \\ \cmidrule(lr){2-6}
      & \textbf{Total} &
      \textbf{61.3\%} & \textbf{61.6\%}  & \textbf{51.2\%} & \textbf{59.1\%} \\

      \cmidrule(lr){1-6}
      \multirow{4}{*}{\textbf{NER}}
     &  1 & 82.4\% & 81.8\%  & 70.9\% & 60.1\%  \\
     &  8 & 81.7\% & 79.9\%  & 69.6\% & 72.0\%  \\
     & 32 & 79.4\% & 78.1\%  & 65.5\% & 66.1\%  \\ \cmidrule(lr){2-6}
     & \textbf{Total} &
      \textbf{81.2\%} & \textbf{79.9\%}  & \textbf{68.7\%} & \textbf{66.1\%} \\

     \bottomrule
    \end{tabular}
    \caption{OOV accuracy (percentage of correctly labelled OOV words) for the DyNet
        and PyTorch implementations of \texttt{Bi-LSTM} and
        \texttt{Bi-LSTM-CRF}. Only training with early stopping is considered. 
    }\label{table:oov-accuracy-total}
\end{table}

Once again, we see a pattern where the DyNet implementations achieves the
overall best results. Especially for the NER task, DyNet is significantly
better at classifying words that it has not yet seen. We also observe, that
adding a CRF layer improves the OOV accuracy for the single layer model of
PyTorch. However, it is only consistent for the batch sizes larger than 1.

Furthermore, the effect of the CRF layers is most notable for the POS task.
In this instance, even the DyNet implementation benefits from CRF for larger
batch sizes and PyTorch sees an increase in accuracy for all batch sizes with a
most significant improvement for batch size 32 (44.0\% without CRF against
54.7\% for the CRF model). For the NER task, DyNet sees not improvement with
CRF, whereas PyTorch still benefits for batch sizes of 8 and 32.

If we turn of focus to the languages and compare the OOV accuracies achieved, we
find an interesting correlation between the absolute benefit of CRF between the
two framework implementations. Figure~\ref{chart:oov-accuracy-lang-ner} plots
the OOV accuracies for the models, averaged across batch sizes. We stick to
looking at the results for the NER data, as these results give a more consistent
picture even though the POS results does not significantly alter the pattern.

\begin{figure}[h!]
    \includegraphics[width=\textwidth]{chart-oov-accuracy-lang-ner}
    \caption{Averged OOV accuracies for the DyNet and PyTorch models with and
        without CRF (TRUE and FALSE, respectively) across languages.
    }\label{chart:oov-accuracy-lang-ner}
\end{figure}

These results show, that for all languages, except Hindi, Japanese and
Norwegian, both the DyNet and the PyTorch implementation sees an overall
improvement when applying CRF. The benefit is more evident for PyTorch and its
single layer model, but the improvement is still consistent for DyNet aswell. On
the other hand, the aforementioned languages shows the opposite: the CRF layer
hurts the OOV accuracy significantly.

This is especially evident for Japanese and Norwegian. We suspect this could
have something to do with the data issues mentioned in
Section~\ref{sec:experiments-ner-data}
and~\ref{sec:experiments-ner-lang-comparison}. However, it might also be
relevant to look at the actual number of OOV words in the test data and their
percentage of the total number of words.\footnote{It would of course have been
    even better to also consider these numbers for the training data, as this
    would give an indication about language models would have had to
    specifically train for better classifying of unknown words. However, we did
not collect this data during training.} Those results can be seen in
Table~\ref{table:oov-percentages-total}.

Most notable is how many OOV words there exist in the Japanese POS test data.
This is consistent with what we described in
Section~\ref{sec:experiments-ner-data} about the way the Polyglot embeddings
differed from the way the POS data was set up. For the NER data, however,
Japanese show a very small percentage of OOV words, whereas Norwegian has
the second highest percentage of 31.1\%. This can in itself not explain why
Norwegian falls short on OOV accuracy for the \texttt{Bi-LSTM-CRF} models, but
it may have had an influence. The high OOV percentages of Russian and Urdu is in
contrast with their strong OOV accuracy, but we believe this can be attributed
general tag distribution described in
Section~\ref{sec:experiments-ner-lang-comparison}.

\begin{table}[h!]
    \centering
    \begin{tabular}{l c c c|c c c}
        \toprule
        \multirow{2}{*}{\bfseries Language} &
        \multicolumn{2}{c}{\bfseries POS} &
        \multicolumn{2}{c}{\bfseries NER} \\

        \cmidrule(lr){2-7}
        & Total words & OOV words & OOV \%
        & Total words & OOV words & OOV \% \\

        \cmidrule(lr){1-7}
        ar & 19059 &  734 &  3.9\% &  2991 &  303 & 10.1\% \\
        da &  9757 &  803 &  8.2\% &  4534 &  459 & 10.1\% \\
        hi & 10149 &  441 &  4.3\% &  2884 &  382 & 13.2\% \\
        ja & 11119 & 4694 & 42.2\% & 14723 &  795 &  6.5\% \\
        no &  7904 &  514 &  6.5\% &  5574 & 1731 & 31.1\% \\
        ru &  8476 &  889 & 10.5\% &  2280 &  507 & 22.2\% \\
        ur & 13412 & 1110 &  8.3\% &  2813 & 1838 & 65.3\% \\

        \bottomrule
    \end{tabular}
    \caption{Relation between total number of words and the number of OOV words
        in the test data for every language accross tasks.
    }\label{table:oov-percentages-total}
\end{table}


\pagebreak
